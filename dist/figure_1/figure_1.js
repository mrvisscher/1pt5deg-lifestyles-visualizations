var _=Object.defineProperty;var m=(o,t,i)=>t in o?_(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i;var n=(o,t,i)=>m(o,typeof t!="symbol"?t+"":t,i);import*as a from"https://cdn.jsdelivr.net/npm/d3@7/+esm";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();const h=[{region:"IN",2015:1.29,2020:1.3,2025:1.25,2030:1.16,2035:1.08,2040:1.05,2045:1.07,2050:1.1,delta:-14.7},{region:"WF",2015:1.74,2020:1.74,2025:1.68,2030:1.87,2035:2.13,2040:2.44,2045:2.83,2050:3.3,delta:89.7},{region:"CN",2015:1.91,2020:1.82,2025:1.75,2030:1.45,2035:1.2,2040:1.08,2045:1.07,2050:1.06,delta:-44.5},{region:"ID",2015:1.95,2020:2.17,2025:2.22,2030:2.19,2035:2.16,2040:2.19,2045:2.31,2050:2.49,delta:27.7},{region:"WA",2015:2.07,2020:1.91,2025:1.76,2030:1.63,2035:1.55,2040:1.52,2045:1.61,2050:1.7,delta:-17.9},{region:"WE",2015:3.38,2020:3.56,2025:3.27,2030:2.74,2035:2.36,2040:2.18,2045:2.17,2050:2.43,delta:-28.1},{region:"MX",2015:3.48,2020:3.48,2025:3.06,2030:2.74,2035:2.5,2040:2.29,2045:2.14,2050:2.02,delta:-42},{region:"World",2015:3.56,2020:3.33,2025:2.99,2030:2.67,2035:2.52,2040:2.48,2045:2.55,2050:2.67,delta:-25},{region:"HR",2015:3.6,2020:3.01,2025:2.56,2030:2.22,2035:2.05,2040:1.9,2045:1.84,2050:1.8,delta:-50},{region:"RO",2015:3.62,2020:3.37,2025:3.17,2030:2.86,2035:2.59,2040:2.5,2045:2.49,2050:2.49,delta:-31.2},{region:"BR",2015:3.95,2020:3.84,2025:3.34,2030:2.86,2035:2.72,2040:2.59,2045:2.51,2050:2.46,delta:-37.7},{region:"WL",2015:4.25,2020:3.92,2025:3.42,2030:3.05,2035:2.95,2040:2.92,2045:3.01,2050:3.12,delta:-26.6},{region:"WM",2015:4.26,2020:4.03,2025:3.79,2030:3.6,2035:3.43,2040:3.36,2045:3.27,2050:3.3,delta:-22.5},{region:"TR",2015:4.29,2020:4.61,2025:3.87,2030:3.01,2035:2.44,2040:2.03,2045:1.76,2050:1.64,delta:-61.8},{region:"ZA",2015:4.42,2020:5.13,2025:5.29,2030:4.85,2035:3.24,2040:2.62,2045:2.37,2050:2.22,delta:-49.8},{region:"HU",2015:4.86,2020:4.42,2025:3.96,2030:3.58,2035:3.39,2040:3.18,2045:3.19,2050:3.18,delta:-34.6},{region:"SK",2015:4.94,2020:3.49,2025:2.68,2030:2.11,2035:1.84,2040:1.65,2045:1.55,2050:1.47,delta:-70.2},{region:"BG",2015:5.08,2020:4.79,2025:3.99,2030:3.07,2035:2.15,2040:1.81,2045:1.67,2050:1.6,delta:-68.5},{region:"ES",2015:5.61,2020:4.82,2025:4.13,2030:3.44,2035:3.08,2040:2.79,2045:2.64,2050:2.55,delta:-54.5},{region:"LV",2015:5.82,2020:4.14,2025:3.71,2030:3.2,2035:2.87,2040:2.57,2045:2.38,2050:2.22,delta:-61.9},{region:"PT",2015:5.96,2020:4.94,2025:4.22,2030:3.65,2035:3.48,2040:3.36,2045:3.33,2050:3.3,delta:-44.6},{region:"TW",2015:6,2020:5.54,2025:5.42,2030:5.02,2035:4.5,2040:3.81,2045:3.6,2050:3.35,delta:-44.2},{region:"E EU",2015:6.22,2020:5.53,2025:4.47,2030:3.6,2035:3.41,2040:3.37,2045:3.22,2050:3.11,delta:-50},{region:"SE",2015:6.25,2020:5.41,2025:4.83,2030:4.33,2035:4.11,2040:3.9,2045:3.78,2050:3.66,delta:-41.4},{region:"RU",2015:6.4,2020:6.43,2025:6.15,2030:5.84,2035:5.66,2040:6.2,2045:6.03,2050:5.64,delta:-11.9},{region:"FR",2015:6.43,2020:5.71,2025:5.07,2030:4.51,2035:4.31,2040:4.1,2045:3.99,2050:3.91,delta:-39.2},{region:"KR",2015:6.82,2020:5.94,2025:5.44,2030:4.52,2035:3.73,2040:3.1,2045:2.78,2050:2.71,delta:-60.3},{region:"S EU",2015:6.85,2020:6.09,2025:5.33,2030:4.55,2035:4.18,2040:3.86,2045:3.72,2050:3.6,delta:-47.4},{region:"IT",2015:7.28,2020:6.76,2025:6.15,2030:5.44,2035:5.02,2040:4.61,2045:4.41,2050:4.23,delta:-41.9},{region:"EU27",2015:7.44,2020:6.44,2025:5.42,2030:4.54,2035:4.17,2040:3.91,2045:3.79,2050:3.7,delta:-50.3},{region:"SI",2015:7.45,2020:4.04,2025:3.01,2030:2.36,2035:2.1,2040:1.9,2045:1.81,2050:1.72,delta:-76.9},{region:"PL",2015:7.76,2020:7.19,2025:5.54,2030:4.24,2035:4.26,2040:4.42,2045:4.12,2050:3.89,delta:-49.9},{region:"LT",2015:7.85,2020:6.53,2025:5.98,2030:5.45,2035:4.92,2040:4.35,2045:4.05,2050:3.81,delta:-51.5},{region:"N EU",2015:7.97,2020:6.63,2025:5.68,2030:4.9,2035:4.52,2040:4.21,2045:4.08,2050:3.99,delta:-49.9},{region:"CZ",2015:8.26,2020:6.25,2025:4.81,2030:3.82,2035:3.44,2040:3.27,2045:3.2,2050:3.15,delta:-61.9},{region:"W EU",2015:8.4,2020:7.13,2025:5.9,2030:4.9,2035:4.45,2040:4.12,2045:4.03,2050:3.96,delta:-52.9},{region:"JP",2015:8.62,2020:7.29,2025:6.2,2030:4.9,2035:4.21,2040:3.68,2045:3.44,2050:3.27,delta:-62.1},{region:"AT",2015:8.63,2020:7.33,2025:6.14,2030:5.15,2035:4.68,2040:4.34,2045:4.19,2050:4.11,delta:-52.4},{region:"MT",2015:8.98,2020:6.77,2025:5.43,2030:5.19,2035:4.66,2040:3.95,2045:3.44,2050:3.18,delta:-64.6},{region:"IE",2015:9.06,2020:7.08,2025:6.07,2030:5.32,2035:5.01,2040:4.72,2045:4.6,2050:4.5,delta:-50.3},{region:"DK",2015:9.16,2020:7.61,2025:5.96,2030:4.8,2035:4.5,2040:4.33,2045:4.33,2050:4.36,delta:-52.4},{region:"GB",2015:9.27,2020:8.59,2025:7.65,2030:6.8,2035:6.51,2040:6.28,2045:6.22,2050:6.24,delta:-32.7},{region:"FI",2015:9.28,2020:7.92,2025:6.73,2030:5.73,2035:5.33,2040:4.98,2045:4.78,2050:4.63,delta:-50.1},{region:"NL",2015:9.33,2020:7.86,2025:6.49,2030:5.41,2035:4.93,2040:4.55,2045:4.4,2050:4.32,delta:-53.7},{region:"CH",2015:9.45,2020:7.96,2025:6.26,2030:5.15,2035:4.71,2040:4.29,2045:4.02,2050:3.74,delta:-60.4},{region:"DE",2015:9.52,2020:7.88,2025:6.18,2030:4.8,2035:4.14,2040:3.75,2045:3.68,2050:3.65,delta:-61.7},{region:"BE",2015:9.53,2020:8.54,2025:7.6,2030:6.73,2035:6.27,2040:5.82,2045:5.66,2050:5.49,delta:-42.4},{region:"CY",2015:9.57,2020:9.32,2025:7.9,2030:6.7,2035:6.41,2040:5.71,2045:5.87,2050:6.07,delta:-36.6},{region:"EE",2015:9.92,2020:8.77,2025:7.58,2030:6.15,2035:3.84,2040:2.66,2045:2.43,2050:2.35,delta:-76.3},{region:"NO",2015:10.14,2020:8.84,2025:7.1,2030:5.53,2035:5.11,2040:4.72,2045:4.52,2050:4.3,delta:-57.6},{region:"GR",2015:11.46,2020:10.14,2025:8.26,2030:6.49,2035:6.16,2040:5.98,2045:6.03,2050:6.09,delta:-46.9},{region:"CA",2015:12.8,2020:11.63,2025:10.28,2030:8.94,2035:8.18,2040:7.69,2045:7.6,2050:7.52,delta:-41.3},{region:"AU",2015:15.95,2020:13.31,2025:10.44,2030:8.83,2035:7.96,2040:7.09,2045:6.83,2050:6.8,delta:-57.4},{region:"US",2015:16.86,2020:15.22,2025:12.85,2030:10.76,2035:9.79,2040:9.31,2045:9.11,2050:9.23,delta:-45.3},{region:"LU",2015:17.65,2020:12.95,2025:9.99,2030:7.95,2035:6.93,2040:6.29,2045:6.2,2050:6,delta:-66}],g={AU:"Australia",AT:"Austria",BE:"Belgium",BR:"Brazil",BG:"Bulgaria",CA:"Canada",CN:"China",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IN:"India",ID:"Indonesia",IE:"Ireland",IT:"Italy",JP:"Japan",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",MX:"Mexico",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",RU:"Russia",SK:"Slovakia",SI:"Slovenia",ZA:"South Africa",KR:"South Korea",ES:"Spain",SE:"Sweden",CH:"Switzerland",TW:"Taiwan",TR:"Turkey",GB:"United Kingdom",US:"United States",WA:"RoW Asia and Pacific",WL:"RoW America",WE:"RoW Europe",WF:"RoW Africa",WM:"RoW Middle East","W EU":"West EU","N EU":"North EU",EU27:"EU27","S EU":"South EU","E EU":"East EU",World:"World"},d=["2015","2020","2025","2030","2035","2040","2045","2050"],u={2015:"#0ab1b1",2020:"#336464",2025:"#00428B",2030:"#f7941d",2035:"#676BFB",2040:"#8641FA",2045:"#2FAB64",2050:"#f15a22"},c=[];for(let o=0;o<h.length;o++)c.push(h[o].region);class b{constructor(t,i){n(this,"marginTop",40);n(this,"marginRight",30);n(this,"marginBottom",35);n(this,"marginLeft",40);n(this,"width_factor",.7);n(this,"bar_height",5);n(this,"bar_padding",2);n(this,"bucket_padding",3);this.years=t,this.regions=i,this.v_scale=this.vertical_scale(this.regions),this.h_scale=this.horizontal_scale(20),this.clear(),this.draw(),window.addEventListener("resize",e=>{this.set_width(window.innerWidth*.7)})}clear(){this.svg=a.select("#graph"),this.svg.selectAll("*").remove(),a.select(".fixed-bottom").selectAll("*").remove()}draw(){this.svg.attr("width","100%"),this.svg.attr("height",this.height()),this.svg.append("g").attr("transform",`translate(${this.marginLeft},0)`).call(a.axisLeft(this.v_scale)),a.select(".fixed-bottom").append("g").attr("transform","translate(0, 10)").call(a.axisBottom(this.h_scale)),a.select(".fixed-bottom").append("text").attr("class","x-axis-title").attr("text-anchor","end").attr("x",this.h_scale(20)).attr("y",42).text("Emissions (tCO₂e yr⁻¹ per capita)"),this.svg.append("line").attr("id","2030-target").attr("x1",this.h_scale(2.38)).attr("x2",this.h_scale(2.38)).attr("y1",0).attr("y2",this.height()-this.marginBottom).attr("stroke","black").attr("stroke-width",1),this.svg.append("line").attr("id","2050-target").attr("x1",this.h_scale(.61)).attr("x2",this.h_scale(.61)).attr("y1",15).attr("y2",this.height()-this.marginBottom).attr("stroke","black").attr("stroke-width",1),this.years.forEach(t=>this.draw_year(t)),a.select("#target-title-2030").attr("style",`left:${this.h_scale(2.38)}px;`),a.select("#target-title-2050").attr("style",`left:${this.h_scale(.61)}px;`),this.draw_seeker_line()}height(){return this.regions.length*this.years.length*(this.bar_height+this.bar_padding*2)+this.regions.length*this.bucket_padding*2+this.marginBottom+this.marginTop}width(){let t=document.body.clientWidth;return t>800&&(t=t*this.width_factor),t}horizontal_scale(t){const i=a.scaleLinear();return i.domain([0,t]),i.range([this.marginLeft,this.width()-this.marginRight]),i}vertical_scale(t){const i=a.scaleBand();return i.domain(t),i.range([this.height()-this.marginBottom,this.marginTop]),i}draw_year(t){this.svg.selectAll(".bar.bar"+t).data(h).enter().append("rect").attr("class","bar bar"+t).attr("x",this.marginLeft).attr("y",this.get_bar_y.bind(this,t)).attr("width",i=>this.h_scale(i[t])-this.marginLeft).attr("height",this.bar_height).attr("fill",u[t]).on("mouseover",this.cb_bar_mouseover.bind(this,t)).on("mouseout",this.cb_bar_mouseout.bind(this))}draw_seeker_line(){this.svg.append("line").attr("id","seeker_line").attr("x1",-500).attr("x2",-500).attr("y1",this.marginTop).attr("y2",this.height()-this.marginBottom).attr("stroke","black").attr("stroke-width",1)}move_seeker_line(t){a.select("#seeker_line").attr("x1",t).attr("x2",t)}get_bar_y(t,i){const e=this.years.findIndex(s=>s==t),r=this.v_scale(i.region)+this.bucket_padding+this.bar_padding+e*(this.bar_height+2*this.bar_padding);return isNaN(r)?-100:r}set_width(t){this.h_scale=this.horizontal_scale(20),this.clear(),this.draw()}cb_bar_mouseover(t,i,e){const r=a.select("#tooltip"),s=this.marginLeft+this.h_scale(e[t])-this.marginLeft,l="Region: "+g[e.region]+"<br>Year: "+t+"<br>Value: "+e[t]+" tCO₂e/cap";window.innerWidth<800?r.html(l).style("right",this.marginRight+"px").style("bottom",this.marginBottom+10+"px").style("top","unset").style("left","unset").style("opacity","1").style("position","fixed"):r.html(l).style("left",s+20+"px").style("top",this.get_bar_y(t,e)+"px").style("right","unset").style("bottom","unset").style("opacity",1).style("position","absolute"),this.move_seeker_line(s)}cb_bar_mouseout(){a.select("#tooltip").style("top","-500px").style("opacity",0),this.move_seeker_line(-100)}}class p{constructor(){this.menu=document.getElementById("menu"),this.countries_el=document.getElementById("countries"),this.years_el=document.getElementById("years"),this.select_all_el=document.getElementById("select_all"),this.deselect_all_el=document.getElementById("deselect_all"),this.select_all_el.onclick=this.select_countries.bind(this),this.deselect_all_el.onclick=this.deselect_countries.bind(this),this.setup_countries(c),this.setup_years(["2015","2030","2050"])}build_graph(){let t=[];for(const r of this.countries_el.getElementsByClassName("countrybutton"))r.active&&t.push(r.region);let i=c.filter(r=>t.includes(r)),e=[];this.years_el.childNodes.forEach(function(r){r.active&&e.push(r.innerHTML)}),new b(e,i)}setup_countries(t){for(let i=0;i<c.length;i++){const e=document.createElement("button");e.region=Object.keys(g)[i],e.innerHTML=g[e.region],e.className="countrybutton",t.includes(e.region)?(e.style["background-color"]="#f7941d",e.active=!0):(e.style["background-color"]="beige",e.active=!1),e.onclick=this.cb_country_onclick.bind(this),this.countries_el.insertBefore(e,document.getElementById("country_divider"))}}cb_country_onclick(t){t.target.active?(t.target.active=!1,t.target.style["background-color"]="beige"):(t.target.active=!0,t.target.style["background-color"]="#f7941d"),this.build_graph()}setup_years(t){for(let i=0;i<d.length;i++){const e=document.createElement("button");e.innerHTML=d[i],t.includes(e.innerHTML)?(e.style["background-color"]=u[d[i]],e.active=!0):(e.style["background-color"]="beige",e.active=!1),e.onclick=this.cb_year_onclick.bind(this),this.years_el.appendChild(e)}}cb_year_onclick(t){t.target.active?(t.target.active=!1,t.target.style["background-color"]="beige"):(t.target.active=!0,t.target.style["background-color"]=u[t.target.innerHTML]),this.build_graph()}select_countries(){for(const t of this.countries_el.getElementsByClassName("countrybutton"))t.active=!0,t.style["background-color"]="#EEAC20";this.build_graph()}deselect_countries(){for(const t of this.countries_el.getElementsByClassName("countrybutton"))t.active=!1,t.style["background-color"]="beige";this.build_graph()}}const y=new p;y.build_graph();
