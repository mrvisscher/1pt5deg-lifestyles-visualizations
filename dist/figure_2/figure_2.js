var h=Object.defineProperty;var n=(r,t,e)=>t in r?h(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>n(r,typeof t!="symbol"?t+"":t,e);import"../modulepreload-polyfill.js";import*as i from"https://cdn.jsdelivr.net/npm/d3@7/+esm";const c={repair_ict_devices:{2015:{SE:.031,LV:.005,HU:-.002,ES:.009,DE:.05},2030:{SE:.011,LV:0,HU:-.002,ES:.003,DE:.009},2050:{SE:.003,LV:-.001,HU:-.001,ES:.001,DE:.004},formatted:"Repair ICT devices"},reduce_excess_living_space:{2015:{SE:.151,LV:0,HU:.137,ES:.113,DE:.646},2030:{SE:.155,LV:.063,HU:.297,ES:.122,DE:.458},2050:{SE:.174,LV:.095,HU:.443,ES:.101,DE:.436},formatted:"Reduce excess living space"},insulate_the_house:{2015:{SE:.063,LV:.051,HU:.175,ES:.102,DE:.244},2030:{SE:.07,LV:.036,HU:.176,ES:.092,DE:.185},2050:{SE:.077,LV:.027,HU:.195,ES:.088,DE:.183},formatted:"Insulate the house"},use_smart_devices:{2015:{SE:.028,LV:.026,HU:.109,ES:.048,DE:.154},2030:{SE:.031,LV:.023,HU:.109,ES:.04,DE:.105},2050:{SE:.034,LV:.02,HU:.113,ES:.031,DE:.095},formatted:"Use smart devices"},switch_to_a_heat_pump:{2015:{SE:.066,LV:-.019,HU:.453,ES:.335,DE:.134},2030:{SE:.105,LV:.161,HU:.813,ES:.497,DE:.978},2050:{SE:.114,LV:.17,HU:.97,ES:.39,DE:.982},formatted:"Switch to a heat pump"},switch_to_a_biomass_boiler:{2015:{SE:.055,LV:.176,HU:.655,ES:.408,DE:.982},2030:{SE:.073,LV:.082,HU:.725,ES:.372,DE:.833},2050:{SE:.091,LV:.071,HU:.914,ES:.361,DE:.888},formatted:"Switch to a biomass boiler"},use_renewable_electricity:{2015:{SE:.004,LV:.079,HU:.172,ES:.269,DE:.716},2030:{SE:.004,LV:.044,HU:.243,ES:.16,DE:.209},2050:{SE:.002,LV:.034,HU:.122,ES:.026,DE:.031},formatted:"Use renewable electricity"},install_a_solar_thermal_system:{2015:{SE:.047,LV:.079,HU:.203,ES:.133,DE:.142},2030:{SE:.056,LV:.091,HU:.238,ES:.121,DE:.115},2050:{SE:.061,LV:.086,HU:.203,ES:.101,DE:.115},formatted:"Install a solar thermal system"},install_own_solar_panels:{2015:{SE:-.027,LV:.07,HU:.193,ES:.176,DE:.497},2030:{SE:-.009,LV:.141,HU:.266,ES:.125,DE:.21},2050:{SE:-.005,LV:.153,HU:.141,ES:.017,DE:.073},formatted:"Install own solar panels"},use_secondhand_ict_devices:{2015:{SE:.01,LV:.016,HU:.001,ES:.003,DE:.041},2030:{SE:.003,LV:.006,HU:0,ES:.001,DE:.008},2050:{SE:.001,LV:.003,HU:0,ES:0,DE:.004},formatted:"Use secondhand ICT devices"},use_certified_ict_products:{2015:{SE:.001,LV:.003,HU:.006,ES:.01,DE:.021},2030:{SE:.001,LV:.004,HU:.006,ES:.007,DE:.009},2050:{SE:0,LV:.004,HU:.003,ES:.001,DE:.003},formatted:"Use certified ICT products"},lower_the_room_temperature:{2015:{SE:.075,LV:.049,HU:.274,ES:.081,DE:.34},2030:{SE:.083,LV:.036,HU:.276,ES:.074,DE:.256},2050:{SE:.092,LV:.027,HU:.304,ES:.069,DE:.252},formatted:"Lower the room temperature"},reduce_hot_water_use:{2015:{SE:.004,LV:.005,HU:.02,ES:.013,DE:.022},2030:{SE:.004,LV:.004,HU:.02,ES:.01,DE:.014},2050:{SE:.005,LV:.004,HU:.016,ES:.008,DE:.012},formatted:"Reduce hot water use"},switch_to_led_lighting:{2015:{SE:.003,LV:.013,HU:.018,ES:.029,DE:.063},2030:{SE:.002,LV:.016,HU:.018,ES:.019,DE:.026},2050:{SE:.001,LV:.016,HU:.009,ES:.004,DE:.009},formatted:"Switch to LED lighting"},switch_to_efficient_devices:{2015:{SE:.005,LV:.026,HU:.031,ES:.053,DE:.134},2030:{SE:.004,LV:.032,HU:.03,ES:.035,DE:.055},2050:{SE:.002,LV:.033,HU:.015,ES:.007,DE:.019},formatted:"Switch to efficient devices"},give_up_a_big_appliance:{2015:{SE:.007,LV:.047,HU:.029,ES:.031,DE:.069},2030:{SE:.004,LV:.041,HU:.028,ES:.02,DE:.028},2050:{SE:.002,LV:.038,HU:.014,ES:.004,DE:.01},formatted:"Give up a big appliance"},share_a_big_appliance:{2015:{SE:.001,LV:0,HU:0,ES:0,DE:.002},2030:{SE:.001,LV:0,HU:0,ES:0,DE:.001},2050:{SE:0,LV:0,HU:0,ES:0,DE:0},formatted:"Share a big appliance"},choose_a_smaller_pet:{2015:{SE:.03,LV:.018,HU:.02,ES:.013,DE:.044},2030:{SE:.016,LV:.012,HU:.012,ES:.007,DE:.019},2050:{SE:.01,LV:.008,HU:.007,ES:.004,DE:.011},formatted:"Choose a smaller pet"},"replace_short-haul_flights":{2015:{SE:.072,LV:-.006,HU:.044,ES:.039,DE:.144},2030:{SE:.045,LV:.007,HU:.018,ES:.023,DE:.057},2050:{SE:.016,LV:.01,HU:.007,ES:.01,DE:.019},formatted:"Replace short-haul flights"},choose_sustainable_pet_food:{2015:{SE:.002,LV:.001,HU:.002,ES:.001,DE:.005},2030:{SE:.001,LV:.001,HU:.001,ES:0,DE:.002},2050:{SE:0,LV:0,HU:.001,ES:0,DE:.001},formatted:"Choose sustainable pet food"},replace_flights_with_train:{2015:{SE:.138,LV:.064,HU:.013,ES:.075,DE:.247},2030:{SE:.082,LV:.043,HU:-.001,ES:.049,DE:.096},2050:{SE:.025,LV:.02,HU:-.003,ES:.023,DE:.022},formatted:"Replace flights with train"},avoid_holiday_driving:{2015:{SE:.19,LV:.232,HU:.118,ES:.249,DE:.348},2030:{SE:.231,LV:.078,HU:.113,ES:.211,DE:.235},2050:{SE:.284,LV:.053,HU:.135,ES:.214,DE:.237},formatted:"Avoid holiday driving"},avoid_flying:{2015:{SE:.311,LV:.27,HU:.123,ES:.161,DE:.559},2030:{SE:.157,LV:.136,HU:.054,ES:.082,DE:.225},2050:{SE:.064,LV:.06,HU:.024,ES:.035,DE:.088},formatted:"Avoid flying"},buy_fewer_clothes_and_shoes:{2015:{SE:.069,LV:.064,HU:.109,ES:.093,DE:.092},2030:{SE:.025,LV:.026,HU:.044,ES:.036,DE:.026},2050:{SE:.008,LV:.007,HU:.016,ES:.013,DE:.008},formatted:"Buy fewer clothes and shoes"},reduce_leisure_and_holiday_driving:{2015:{SE:.529,LV:.715,HU:.432,ES:.7,DE:.996},2030:{SE:.644,LV:.235,HU:.413,ES:.593,DE:.674},2050:{SE:.794,LV:.157,HU:.494,ES:.602,DE:.68},formatted:"Reduce leisure and holiday driving"},replace_flights_with_bus:{2015:{SE:.071,LV:.08,HU:.088,ES:.09,DE:.336},2030:{SE:.068,LV:.054,HU:.039,ES:.055,DE:.133},2050:{SE:.024,LV:.035,HU:.018,ES:.027,DE:.04},formatted:"Replace flights with bus"},replace_flights_with_train_and_bus:{2015:{SE:.102,LV:.077,HU:.055,ES:.086,DE:.297},2030:{SE:.074,LV:.052,HU:.021,ES:.053,DE:.116},2050:{SE:.025,LV:.032,HU:.009,ES:.026,DE:.032},formatted:"Replace flights with train and bus"},switch_to_a_smaller_car:{2015:{SE:.112,LV:.197,HU:.097,ES:.175,DE:.2},2030:{SE:.13,LV:.065,HU:.092,ES:.145,DE:.134},2050:{SE:.158,LV:.043,HU:.109,ES:.146,DE:.135},formatted:"Switch to a smaller car"},switch_to_carpooling:{2015:{SE:.383,LV:.582,HU:.375,ES:.564,DE:.716},2030:{SE:.466,LV:.193,HU:.359,ES:.476,DE:.484},2050:{SE:.574,LV:.128,HU:.43,ES:.482,DE:.487},formatted:"Switch to carpooling"},switch_to_an_electric_vehicle:{2015:{SE:.954,LV:1.279,HU:.863,ES:1.332,DE:1.482},2030:{SE:1.162,LV:.388,HU:.828,ES:1.146,DE:1.107},2050:{SE:1.434,LV:.26,HU:1.041,ES:1.197,DE:1.197},formatted:"Switch to an electric vehicle"},replace_car_with_cycling_and_walking:{2015:{SE:1.092,LV:1.568,HU:.981,ES:1.574,DE:1.846},2030:{SE:1.221,LV:.534,HU:.914,ES:1.253,DE:1.228},2050:{SE:1.459,LV:.349,HU:1.081,ES:1.229,DE:1.228},formatted:"Replace car with cycling and walking"},replace_car_with_public_transit:{2015:{SE:.58,LV:0,HU:.831,ES:1.277,DE:1.097},2030:{SE:1.016,LV:0,HU:.838,ES:1.128,DE:.902},2050:{SE:1.357,LV:0,HU:1.043,ES:1.181,DE:1.054},formatted:"Replace car with public transit"},move_closer_to_the_workplace:{2015:{SE:.082,LV:.188,HU:.104,ES:.149,DE:.176},2030:{SE:.1,LV:.062,HU:.1,ES:.127,DE:.119},2050:{SE:.124,LV:.041,HU:.119,ES:.128,DE:.12},formatted:"Move closer to the workplace"},work_from_home:{2015:{SE:.067,LV:.128,HU:.058,ES:.078,DE:.115},2030:{SE:.082,LV:.036,HU:.055,ES:.067,DE:.083},2050:{SE:.101,LV:.021,HU:.068,ES:.071,DE:.089},formatted:"Work from home"},"replace_car_with_car-sharing":{2015:{SE:.102,LV:.104,HU:.031,ES:.13,DE:.047},2030:{SE:.043,LV:.048,HU:.012,ES:.05,DE:.016},2050:{SE:.019,LV:.026,HU:.005,ES:.019,DE:.008},formatted:"Replace car with car-sharing"},replace_suv_with_a_smaller_car:{2015:{SE:.034,LV:.017,HU:.011,ES:.046,DE:.053},2030:{SE:.039,LV:.006,HU:.011,ES:.039,DE:.036},2050:{SE:.047,LV:.004,HU:.013,ES:.04,DE:.036},formatted:"Replace SUV with a smaller car"},avoid_food_waste_at_home:{2015:{SE:.17,LV:.184,HU:.185,ES:.137,DE:.165},2030:{SE:.115,LV:.13,HU:.095,ES:.073,DE:.085},2050:{SE:.088,LV:.121,HU:.066,ES:.055,DE:.067},formatted:"Avoid food waste at home"},replace_red_meat_with_white:{2015:{SE:.329,LV:.03,HU:.021,ES:.015,DE:.147},2030:{SE:.205,LV:.035,HU:.015,ES:.019,DE:.094},2050:{SE:.148,LV:.062,HU:.011,ES:.021,DE:.07},formatted:"Replace red meat with white"},replace_ruminant_meat_with_white:{2015:{SE:.299,LV:.051,HU:.021,ES:.087,DE:.193},2030:{SE:.187,LV:.05,HU:.015,ES:.053,DE:.11},2050:{SE:.133,LV:.054,HU:.011,ES:.039,DE:.077},formatted:"Replace ruminant meat with white"},replace_bottled_water_with_tap:{2015:{SE:.003,LV:.018,HU:.013,ES:.02,DE:.037},2030:{SE:.001,LV:.009,HU:.007,ES:.009,DE:.016},2050:{SE:0,LV:.005,HU:.004,ES:.004,DE:.008},formatted:"Replace bottled water with tap"},replace_other_drinks_with_tap:{2015:{SE:.092,LV:.113,HU:.043,ES:.053,DE:.134},2030:{SE:.034,LV:.061,HU:.023,ES:.024,DE:.057},2050:{SE:.011,LV:.035,HU:.013,ES:.013,DE:.031},formatted:"Replace other drinks with tap"},"reduce_animal-based_foods":{2015:{SE:.616,LV:.247,HU:.351,ES:.362,DE:.601},2030:{SE:.349,LV:.204,HU:.241,ES:.199,DE:.339},2050:{SE:.231,LV:.149,HU:.187,ES:.129,DE:.228},formatted:"Reduce animal-based foods"},switch_to_a_vegan_diet:{2015:{SE:.77,LV:.309,HU:.438,ES:.452,DE:.751},2030:{SE:.437,LV:.255,HU:.302,ES:.248,DE:.424},2050:{SE:.289,LV:.187,HU:.234,ES:.162,DE:.285},formatted:"Switch to a vegan diet"},switch_to_a_vegetarian_diet:{2015:{SE:.386,LV:.176,HU:.239,ES:.298,DE:.342},2030:{SE:.193,LV:.146,HU:.156,ES:.132,DE:.189},2050:{SE:.115,LV:.126,HU:.11,ES:.054,DE:.115},formatted:"Switch to a vegetarian diet"},switch_to_organic_vegetables:{2015:{SE:.006,LV:.003,HU:.002,ES:.007,DE:.006},2030:{SE:.006,LV:.002,HU:.001,ES:.006,DE:.004},2050:{SE:.005,LV:.001,HU:.001,ES:.004,DE:.003},formatted:"Switch to organic vegetables"},switch_to_seasonal_vegetables:{2015:{SE:.005,LV:.003,HU:.002,ES:.005,DE:.005},2030:{SE:.004,LV:.002,HU:.001,ES:.004,DE:.002},2050:{SE:.003,LV:.001,HU:.001,ES:.003,DE:.002},formatted:"Switch to seasonal vegetables"},avoid_excess_food_consumption:{2015:{SE:.234,LV:.13,HU:.141,ES:.243,DE:.292},2030:{SE:.148,LV:.1,HU:.091,ES:.14,DE:.154},2050:{SE:.103,LV:.09,HU:.064,ES:.097,DE:.111},formatted:"Avoid excess food consumption"}},_={SE:"Sweden",LV:"Latvia",HU:"Hungary",ES:"Spain",DE:"Germany"};let S=["#0ab1b1","#f7941d","#f15a22","#0082c9"];class d{constructor(t,e){s(this,"marginTop",40);s(this,"marginRight",30);s(this,"marginBottom",35);s(this,"marginLeft",55);s(this,"width_factor",.7);s(this,"bar_height",20);s(this,"bar_padding",2);s(this,"bucket_padding",10);this.year=t,this.practices=e,this.v_scale=this.vertical_scale(["Germany","Spain","Hungary","Latvia","Sweden"]),this.h_scale=this.horizontal_scale(this.max_x()),this.clear(),this.draw(),window.addEventListener("resize",a=>{this.set_width(window.innerWidth*.7)})}clear(){this.svg=i.select("#graph"),this.svg.selectAll("*").remove(),i.select(".fixed-bottom").selectAll("*").remove()}draw(){this.svg.attr("width","100%"),this.svg.attr("height","100%"),this.svg.append("g").attr("transform",`translate(${this.marginLeft},0)`).call(i.axisLeft(this.v_scale)),i.select(".fixed-bottom").append("g").attr("transform","translate(0, 10)").call(i.axisBottom(this.h_scale)),i.select(".fixed-bottom").append("text").attr("class","x-axis-title").attr("text-anchor","end").attr("x",this.h_scale(this.max_x())).attr("y",42).text("Avoided emissions (tCO₂e yr⁻¹ per capita)"),this.practices.forEach(t=>this.draw_practice(t)),this.draw_seeker_line()}max_x(){let t=[];for(const[a,E]of Object.entries(c))if(this.practices.includes(a))for(const o of Object.values(E[this.year]))t.push(o);const e=Math.max(...t);return e+e*.2}height(){return 5*this.practices.length*(this.bar_height+this.bar_padding*2)+5*this.bucket_padding*2+this.marginBottom+this.marginTop}width(){let t=document.body.clientWidth;return t>800&&(t=t*this.width_factor),t}horizontal_scale(t){const e=i.scaleLinear();return e.domain([0,t]),e.range([this.marginLeft,this.width()-this.marginRight]),e}vertical_scale(t){const e=i.scaleBand();return e.domain(t),e.range([this.height()-this.marginBottom,this.marginTop]),e}draw_practice(t){this.svg.selectAll(".bar.bar"+t).data(["SE","LV","HU","ES","DE"]).enter().append("rect").attr("class","bar bar"+t).attr("x",this.marginLeft+1).attr("y",this.get_bar_y.bind(this,t)).attr("width",e=>this.h_scale(c[t][this.year][e])-this.marginLeft).attr("height",this.bar_height).attr("fill",S[this.practices.findIndex(e=>e==t)]).on("mouseover",this.cb_bar_mouseover.bind(this,t)).on("mouseout",this.cb_bar_mouseout.bind(this))}draw_seeker_line(){console.log(this.svg),this.svg.append("line").attr("id","seeker_line").attr("x1",-500).attr("x2",-500).attr("y1",this.marginTop).attr("y2",this.svg.node().getBoundingClientRect().height-this.marginBottom).attr("stroke","black").attr("stroke-width",1)}move_seeker_line(t){i.select("#seeker_line").attr("x1",t).attr("x2",t)}get_bar_y(t,e){const a=this.practices.findIndex(o=>o==t),E=this.v_scale(_[e])+this.bucket_padding+this.bar_padding+a*(this.bar_height+2*this.bar_padding);return isNaN(E)?-100:E}set_width(t){this.h_scale=this.horizontal_scale(2),this.clear(),this.draw()}cb_bar_mouseover(t,e,a){const E=i.select("#tooltip"),o=this.h_scale(c[t][this.year][a]),l=`${c[t].formatted}: ${c[t][this.year][a]} tCO₂e yr⁻¹ per capita`;window.innerWidth<800?E.html(l).style("right",this.marginRight+"px").style("bottom",this.marginBottom+10+"px").style("top","unset").style("left","unset").style("opacity","1").style("position","fixed"):E.html(l).style("left",o+20+"px").style("top",this.get_bar_y(t,a)+"px").style("right","unset").style("bottom","unset").style("opacity",1).style("position","absolute"),this.move_seeker_line(o)}cb_bar_mouseout(){i.select("#tooltip").style("top","-500px").style("opacity",0),this.move_seeker_line(-100)}}class m{constructor(){this.menu=document.getElementById("menu"),this.practices_el=document.getElementById("practices"),this.years_el=document.getElementById("years"),this.year=2015,this.practices=[],this.setup_practices(),this.setup_years()}build_graph(){new d(this.year,this.practices),this.setup_practices(),this.setup_years()}setup_practices(){this.practices_el.innerHTML="";for(const[t,e]of Object.entries(c)){const a=document.createElement("div");if(a.practice=t,a.innerHTML=e.formatted,a.className="practicebutton",a.draggable=!0,this.practices.includes(t))a.style["background-color"]=S[this.practices.findIndex(E=>E==t)],a.active=!0;else{if(this.practices.length==4)continue;a.style["background-color"]="beige",a.active=!1}a.onclick=this.cb_practice_onclick.bind(this),this.practices_el.appendChild(a)}}cb_practice_onclick(t){if(t.target.active){t.target.active=!1;const e=this.practices.indexOf(t.target.practice);this.practices.splice(e,1),S.push(S.splice(e,1)[0]),t.target.style["background-color"]="beige"}else{if(this.practices.length==4)return;t.target.active=!0,this.practices.push(t.target.practice),t.target.style["background-color"]=S[this.practices.length-1]}this.build_graph()}setup_years(){this.years_el.childNodes.forEach(t=>{t.nodeName=="DIV"&&(t.innerHTML==this.year?t.style["background-color"]="goldenrod":(t.style["background-color"]="white",t.onclick=this.cb_year_onclick.bind(this)))})}cb_year_onclick(t){this.year=t.target.innerHTML,this.build_graph()}select_countries(){for(const t of this.countries_el.getElementsByClassName("countrybutton"))t.active=!0,t.style["background-color"]="#EEAC20";this.build_graph()}deselect_countries(){for(const t of this.countries_el.getElementsByClassName("countrybutton"))t.active=!1,t.style["background-color"]="beige";this.build_graph()}}const L=new m;L.build_graph();
